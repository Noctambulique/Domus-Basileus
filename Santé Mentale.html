<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>√âtat int√©rieur</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body {
    font-family: serif;
    margin: 0;
    background-image: url("Fond/Fille devant maison.jpg");
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center top;
    background-attachment: fixed;
}

.panel {
    max-width: 720px;
    margin: 80px auto;
    padding: 50px 60px;
    background: rgba(255,255,255,0.70);
    backdrop-filter: blur(6px);
    box-shadow: 0 20px 60px rgba(0,0,0,0.25);
    text-align: center;
    color: #111;
}

h1 {
    font-weight: normal;
    margin-bottom: 30px;
}

canvas {
    max-width: 100%;
    margin: 30px auto 20px;
}

.buttons {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 14px;
    margin-top: 40px;
}

button {
    height: 52px;
    background: rgba(255,255,255,0.9);
    border: 1px solid rgba(0,0,0,0.4);
    font-size: 14px;
    cursor: pointer;
    transition: all 0.25s ease;
    backdrop-filter: blur(2px);
    color: #111;
}

button:hover {
    background: rgba(0,0,0,0.85);
    color: white;
}
</style>
</head>

<body>

<div class="panel">
<h1>√âtat int√©rieur</h1>

<canvas id="radarChart" height="300"></canvas>

<div class="buttons">
    <button data-criterion="Sommeil"></button>
    <button data-criterion="Nourriture"></button>
    <button data-criterion="Sociabilit√©"></button>
    <button data-criterion="Sortir"></button>
    <button data-criterion="Impr√©vu"></button>
    <button data-criterion="Temps"></button>
    <button data-criterion="Probl√®me"></button>
    <button data-criterion="Musique"></button>
    <button data-criterion="R√©el"></button>
    <button data-criterion="Film"></button>
</div>
</div>

<script>
/* üî¢ BASE */
const baseBars = {
    adequation: 50,
    resilience: 50,
    motivation: 50,
    clarte: 50,
    inspiration: 50
};

let bars = { ...baseBars };

/* ‚öôÔ∏è CONFIG */
const criteriaConfig = {
    Sommeil:{defaultState:1,states:[
        {label:"üõèÔ∏è Mauvais sommeil",impact:{adequation:-10,resilience:-20,motivation:-15,clarte:-15, inspiration:-10}},
        {label:"üõèÔ∏è Sommeil moyen",impact:{}},
        {label:"üõèÔ∏è Bon sommeil",impact:{adequation:10,resilience:10,motivation:10,clarte:10}}
    ]},
    Nourriture:{defaultState:1,states:[
        {label:"ü•ó Mauvaise alimentation",impact:{adequation:-10,resilience:-5,motivation:-10,clarte:-5}},
        {label:"ü•ó Alimentation correcte",impact:{}},
        {label:"ü•ó Bonne alimentation",impact:{adequation:5,resilience:5,motivation:5,clarte:10}}
    ]},
    Sociabilit√©:{defaultState:1,states:[
        {label:"üó£Ô∏è Isolement",impact:{adequation:-10,resilience:-10,motivation:-10,clarte:-5}},
        {label:"üó£Ô∏è Contacts normaux",impact:{}},
        {label:"üó£Ô∏è Lien social nourrissant",impact:{adequation:15,resilience:10,motivation:10,clarte:5}}
    ]},
    Sortir:{defaultState:1,states:[
        {label:"üö∂ Immobilit√©",impact:{adequation:-10,resilience:-10,motivation:-20,clarte:-15}},
        {label:"üö∂ En mouvement",impact:{inspiration:10}},
        {label:"üö∂ Haut dynamisme",impact:{adequation:15,resilience:15,motivation:15,clarte:10,inspiration:10}}
    ]},
    Impr√©vu:{defaultState:1,states:[
        {label:"üó∫Ô∏è Impr√©vu",impact:{adequation:-10,resilience:-20,motivation:-20}},
        {label:"üó∫Ô∏è Rien de pr√©vu",impact:{}},
        {label:"üó∫Ô∏è Plan fluide",impact:{adequation:15,resilience:5,motivation:5,clarte:10}}
    ]},
    Temps:{defaultState:1,states:[
        {label:"‚è≥ Pas de temps",impact:{adequation:-15,resilience:-10,clarte:-5,inspiration:-10}},
        {label:"‚è≥ Un peu de temps",impact:{}},
        {label:"‚è≥ Beaucoup de temps",impact:{adequation:5,resilience:5,motivation:5,clarte:10,inspiration:5}}
    ]},
    Probl√®me:{defaultState:1,states:[
        {label:"‚ùì Probl√®me irr√©solu",impact:{adequation:-15,resilience:-20,clarte:-10}},
        {label:"‚ùì En recherche",impact:{}},
        {label:"‚ùì Compris",impact:{adequation:15,resilience:15,clarte:10}}
    ]},
    Musique:{defaultState:1,states:[
        {label:"üéµ Pas de musique",impact:{}},
        {label:"üéµ Un peu de musique",impact:{}},
        {label:"üéµ Beaucoup de musique",impact:{adequation:15,resilience:15,motivation:15,clarte:5,inspiration:20}}
    ]},
    R√©el:{defaultState:1,states:[
        {label:"üìû Pas de r√©el",impact:{adequation:10}},
        {label:"üìû Un peu de r√©el",impact:{}},
        {label:"üìû Beaucoup de r√©el",impact:{adequation:-5,resilience:20,motivation:-10,clarte:-10}}
    ]},
    Film:{defaultState:1,states:[
        {label:"üé¨ Aucun film",impact:{}},
        {label:"üé¨ Un √©pisode",impact:{}},
        {label:"üé¨ Beaucoup",impact:{adequation:-5,resilience:10,motivation:-10,clarte:-10,inspiration:10}}
    ]}
};

const activeStates = {};

/* Clamp */
const clamp = v => Math.max(0, Math.min(100, v));

/* Radar */
const ctx = document.getElementById("radarChart");

const radarChart = new Chart(ctx, {
    type: "radar",
    data: {
        labels: ["Ad√©quation", "R√©silience", "Motivation", "Clart√©", "Inspiration"],
        datasets: [{
            data: Object.values(baseBars),
            backgroundColor: "rgba(110,125,255,0.25)",
            borderColor: "rgba(110,125,255,0.8)",
            pointBackgroundColor: "#6f7cff"
        }]
    },
    options: {
        scales: {
            r: {
                min: 0,
                max: 100,
                ticks: { display: false },
                grid: { color: "rgba(0,0,0,0.15)" },
                angleLines: { color: "rgba(0,0,0,0.15)" }
            }
        },
        plugins: {
            legend: { display: false }
        }
    }
});

/* Recalcul */
function recomputeBars() {
    bars = { ...baseBars };

    for (const c in activeStates) {
        const impact = activeStates[c];
        for (const key in impact) {
            bars[key] += impact[key];
        }
    }

    for (const k in bars) bars[k] = clamp(bars[k]);

    radarChart.data.datasets[0].data = [
        bars.adequation,
        bars.resilience,
        bars.motivation,
        bars.clarte,
        bars.inspiration
    ];

    radarChart.update();
}

/* Boutons */
document.querySelectorAll("[data-criterion]").forEach(btn => {
    const id = btn.dataset.criterion;
    const cfg = criteriaConfig[id];
    let index = cfg.defaultState;

    btn.textContent = cfg.states[index].label;
    activeStates[id] = cfg.states[index].impact;

    btn.addEventListener("click", () => {
        index = (index + 1) % cfg.states.length;
        btn.textContent = cfg.states[index].label;
        activeStates[id] = cfg.states[index].impact;
        recomputeBars();
    });
});

/* Init */
recomputeBars();
</script>

</body>
</html>
